# ETAPA 1: Construcci贸n con Maven y JAVA 21
FROM maven:3.9.6-amazoncorretto-21 AS build
WORKDIR /app
COPY pom.xml .
COPY src ./src
# Compilamos saltando los tests para evitar errores de conexi贸n
RUN mvn clean package -DskipTests

# ETAPA 2: Ejecuci贸n con JAVA 21
FROM amazoncorretto:21
WORKDIR /app
# Copiamos el .jar que se cre贸 arriba
COPY --from=build /app/target/*.jar app.jar
# Importante: Tu app usa el puerto 9090
EXPOSE 9090
ENTRYPOINT ["java", "-jar", "app.jar"]
